<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Meta Robots Tag -->
  <meta name="robots" content="all">

  <!-- Site Author -->
  <meta name="author" content="bo">

  <!-- Atom Feed -->
  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Bo Jeanes Feed">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="/assets/css/minimal.css">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png">

  <!-- Analytics -->
  

  <!-- SEO -->
  <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Bo Jeanes</title>
<meta property="og:title" content="Bo Jeanes" />
<meta name="author" content="Bo Jeanes" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://bjeanes.com/2009/11/" />
<meta property="og:url" content="https://bjeanes.com/2009/11/" />
<meta property="og:site_name" content="Bo Jeanes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-11-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@bjeanes" />
<meta name="twitter:creator" content="@bjeanes" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://bjeanes.com/2009/11/"},"description":null,"@type":"BlogPosting","url":"https://bjeanes.com/2009/11/","name":null,"headline":"Bo Jeanes","dateModified":"2009-11-01T00:00:00+00:00","datePublished":"2009-11-01T00:00:00+00:00","sameAs":null,"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://avatars2.githubusercontent.com/u/2560?s=200&v=4"},"name":"Bo Jeanes"},"image":null,"author":{"@type":"Person","name":"Bo Jeanes"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body class="black-90 ">

<div class="flex flex-column items-center">
  <div class="mw7 w-100 ph3 ph4-ns">
    <h1 class="f5 fw4 lh-title mb0 pb2 bb b--light-gray">Posts from November 2009</h1>

    
    <a class="link black-80 hover-silver" href="/2009/11/iterative-html5-turning-a-comma-separated-list-into-a-semantic-list/">
      <article class="f5 lh-copy fw3 pb4 bb b--light-gray">
        <div class="f6 fw6 lh-title ttu tracked mv4"><time>Nov 2009</time></div>
        <h3 class="f3 fw6 lh-title mb0">Iterative HTML5 - Turning a comma-separated list into a semantic list</h3>
        <p class="f5 fw3 lh-copy mv2">In the process of going through the redesign of <a href="http://mocra.com">http://mocra.com</a>, I keep finding better ways to make
the HTML more semantic.

<a href="http://chendo.net">Jack Chen</a> and I have been turning the design into 
HTML over the last few days and we’ve been striving to be as semantic as
possible by taking advantage of new HTML5 elements and by separating the
content further from the design code with all the new CSS3 selectors.

Here’s an example of something we just did to make the HTML cleaner and
more meaningful, whilst still maintaining the look and style.

Here’s what we are styling:

<img src="http://img.skitch.com/20091112-qujhy29f4e5mkpradfd3hb9hnj.jpg" alt="image" />

Usually your HTML (or HAML in this case) would look something like this:

<div class="language-haml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">%footer</span>
  <span class="nt">%aside</span>
    <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Dr Nic Williams'</span><span class="p">,</span> <span class="s1">'http://drnicwilliams.com/'</span>
    ,
    <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Bodaniel Jeanes'</span><span class="p">,</span> <span class="s1">'http://bjeanes.com/'</span>
    ,
    <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Jack Chen'</span><span class="p">,</span> <span class="s1">'http://chendo.net/'</span>
    ,                      
    <span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Ryan Bigg'</span><span class="p">,</span> <span class="s1">'http://frozenplague.net/'</span>
</code></pre></div></div>

However, we can make this <strong>list</strong> of people more semantic by using an
<code class="highlighter-rouge">&lt;ul&gt;</code> element and some CSS magic.

Here’s what the new HTML (HAML here) would look like:

<div class="language-haml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">%footer</span>
  <span class="nt">%aside</span>
    <span class="nt">%ul</span>
      <span class="nt">%li</span><span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Dr Nic Williams'</span><span class="p">,</span> <span class="s1">'http://drnicwilliams.com/'</span>
      <span class="nt">%li</span><span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Bodaniel Jeanes'</span><span class="p">,</span> <span class="s1">'http://bjeanes.com/'</span>
      <span class="nt">%li</span><span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Jack Chen'</span><span class="p">,</span>       <span class="s1">'http://chendo.net/'</span>
      <span class="nt">%li</span><span class="p">=</span> <span class="n">link_to</span> <span class="s1">'Ryan Bigg'</span><span class="p">,</span>       <span class="s1">'http://frozenplague.net/'</span>
</code></pre></div></div>

And the CSS (Sass here):

<div class="language-sass highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">body</span>
  <span class="nt">footer</span>
    <span class="nt">aside</span>
      <span class="nl">padding-top</span><span class="p">:</span> <span class="m">6px</span>
      <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span>

      <span class="nt">ul</span>
        <span class="nl">list-style</span><span class="p">:</span> <span class="nb">none</span>
        <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span>
      
        <span class="nt">li</span>
          <span class="nl">display</span><span class="p">:</span> <span class="nb">inline</span>
          
          <span class="k">&amp;</span><span class="nd">:after</span>
            <span class="nl">content</span><span class="p">:</span> <span class="s2">","</span>
            
          <span class="k">&amp;</span><span class="nd">:last-child:after</span>
            <span class="nl">content</span><span class="p">:</span> <span class="s2">""</span>
</code></pre></div></div>
</p>
  
        <div class="f6 fw3 silver mt0">
          
          <time>12 Nov 2009</time>
          
          <span class="ttl">&middot; 



  
	  1 min read
	

</span>
        </div>
      </article>
    </a>
    
    <a class="link black-80 hover-silver" href="/2009/11/using-partial-layouts-to-dry-out-your-views/">
      <article class="f5 lh-copy fw3 pb4 bb b--light-gray">
        <div class="f6 fw6 lh-title ttu tracked mv4"><time>Nov 2009</time></div>
        <h3 class="f3 fw6 lh-title mb0">Using partial layouts to DRY out your views</h3>
        <p class="f5 fw3 lh-copy mv2">The other day we got some HTML from the designer of one of our clients
to implement as the new UI for an app we are building at
<a href="http://mocra.com/">Mocra</a>. Overall the HTML was good but implementing
it started to feel a little moist (i.e. not DRY).

For example, around all the apps form the client’s design had a rounded
white box, the HTML of which went something like this:

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wht"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wht-inside"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fieldset&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"frow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;</span>Currency:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"fs"</span><span class="nt">&gt;&lt;option&gt;</span>EUR<span class="nt">&lt;/option&gt;&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"frow frlast"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;</span>File:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">""</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/fieldset&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"cround"</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/images/round-corners-bottom.gif"</span> <span class="na">alt=</span><span class="s">""</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

It’s a lot of <code class="highlighter-rouge">div</code> tags to have to repeat around every form that has
this style. Luckily a nice feature of Rails partials can help out.
Create a shared partial file that will act as a layout like this:

<div class="language-rhtml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- app/views/shared/_fieldset.html.erb --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wht"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wht-inside"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;fieldset&gt;</span>
            <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;/fieldset&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"cround"</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/images/round-corners-bottom.gif"</span> <span class="na">alt=</span><span class="s">""</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

Then in your views that need to have this white box, simply wrap your
content in that layout like so:

<div class="language-rhtml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="n">render</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="s1">'shared/fieldset'</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"frow"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label&gt;</span>Currency:<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"fs"</span><span class="nt">&gt;&lt;option&gt;</span>EUR<span class="nt">&lt;/option&gt;&lt;/select&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"frow frlast"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label&gt;</span>File:<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">""</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="c">&lt;!-- Or, if the inner content is already in a partial --&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span><span class="p">,</span> <span class="ss">:partial</span> <span class="o">=&gt;</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="s1">'shared/fieldset'</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
</p>
  
        <div class="f6 fw3 silver mt0">
          
          <time>5 Nov 2009</time>
          
          <span class="ttl">&middot; 



  
	  1 min read
	

</span>
        </div>
      </article>
    </a>
    
    <a class="link black-80 hover-silver" href="/2009/11/64-bit-postgres-and-rails-on-snow-leopard/">
      <article class="f5 lh-copy fw3 pb4 bb b--light-gray">
        <div class="f6 fw6 lh-title ttu tracked mv4"><time>Nov 2009</time></div>
        <h3 class="f3 fw6 lh-title mb0">64-bit Postgres and Rails on Snow Leopard </h3>
        <p class="f5 fw3 lh-copy mv2"><h3 id="dependencies">Dependencies</h3>

Install the GEOS and PROJ frameworks from
<a href="http://www.kyngchaos.com/software:frameworks">here</a>

<h3 id="postgres">Postgres</h3>

<h4 id="download-and-compile">Download and Compile</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://ftp2.au.postgresql.org/pub/postgresql/source/v8.4.1/postgresql-8.4.1.tar.bz2 | <span class="nb">tar </span>xjf -
<span class="nb">cd </span>postgresql-8.4.1
./configure
make <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make install
</code></pre></div></div>

The files are now all installed in the right places, onwards to making
them usable!

<h4 id="create-a-postgres-user-and-group">Create a <code class="highlighter-rouge">postgres</code> User and Group</h4>

This is adjusted from the instructions in the comments
<a href="http://www.postgresql.org/docs/8.3/interactive/postgres-user.html">here</a>).

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Find unused Group ID and User ID:</span>
<span class="nb">export </span><span class="nv">GROUPID</span><span class="o">=</span><span class="sb">`</span><span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-list</span> /Groups PrimaryGroupID | ruby <span class="nt">-e</span> <span class="s1">'puts STDIN.read.scan(/\d+/m).map{|i|i.to_i}.uniq.sort.last.succ'</span><span class="sb">`</span>
<span class="nb">export </span><span class="nv">USERID</span><span class="o">=</span><span class="sb">`</span><span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-list</span> /Users UniqueID | ruby <span class="nt">-e</span> <span class="s1">'puts STDIN.read.scan(/\d+/m).map{|i|i.to_i}.uniq.sort.last.succ'</span><span class="sb">`</span>

<span class="c"># Create group:</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Groups/_postgres
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Groups/_postgres PrimaryGroupID <span class="nv">$GROUPID</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-append</span> /Groups/_postgres RecordName postgres

<span class="c"># Create user:</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres UniqueID <span class="nv">$USERID</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres PrimaryGroupID <span class="nv">$GROUPID</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres UserShell /bin/bash
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres RealName <span class="s2">"PostgreSQL Server"</span>
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-create</span> /Users/_postgres NFSHomeDirectory /usr/local/pgsql
<span class="nb">sudo </span>dscl <span class="nb">.</span> <span class="nt">-append</span> /Users/_postgres RecordName postgres
</code></pre></div></div>

That’s the clean way of making a user (so it doesn’t show up in your
Accounts preference pane, etc.

<h4 id="clean-up">Clean up</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>touch /var/log/psql.log
<span class="nb">sudo </span>mkdir /usr/local/pgsql/data
<span class="nb">sudo </span>chown <span class="nt">-R</span> postgres:postgres /usr/local/pgsql/data /var/log/psql.log

<span class="c"># Put Postgres in your path</span>
<span class="nb">export</span> <span class="nv">$PATH</span><span class="o">=</span><span class="s2">"/usr/local/pgsql/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
<span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'echo /usr/local/pgsql/bin &gt; /etc/paths.d/pgsql'</span>
</code></pre></div></div>

Thanks to Apple we have a nice way of setting the PATH across the entire
system so every app should now know how to find the Postgres binaries
and the data directory is now set up to store the database files — now,
we just need to create them.

<h4 id="initialise-the-database">Initialise the Database</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Become the postgres user</span>
<span class="nb">sudo </span>su - postgres

<span class="c"># If this throws next commant throws an error about shared memory, </span>
<span class="c"># try putting "these lines":http://gist.github.com/224815 into </span>
<span class="c"># /etc/sysctl.conf, rebooting, and trying again:</span>
initdb <span class="nt">-D</span> /usr/local/pgsql/data <span class="nt">-E</span> UTF8

<span class="c"># Start the database</span>
postgres <span class="nt">-D</span> /usr/local/pgsql/data <span class="o">&gt;</span>/var/log/psql.log 2&gt;&amp;1 &amp;

<span class="c"># Create a test database and check you can connect to it</span>
createdb <span class="nb">test
</span>psql <span class="nb">test</span>

<span class="c"># Just create a superuser for general dev tasks</span>
createuser postgres

<span class="c"># we don't want to be the postgres user anymore</span>
<span class="nb">exit</span>
</code></pre></div></div>

Your done with the Postgres setup now!

<h3 id="postgis">PostGIS</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://postgis.refractions.net/download/postgis-1.3.7SVN.tar.gz | <span class="nb">tar </span>xzf -
<span class="nb">cd </span>postgis-1.3.7SVN
./configure <span class="nt">--with-geosconfig</span><span class="o">=</span>/Library/Frameworks/GEOS.framework/unix/bin/geos-config <span class="nt">--with-projdir</span><span class="o">=</span>/Library/Frameworks/PROJ.framework/unix
make <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make install
</code></pre></div></div>

Phew! That one was easy.

<h3 id="postgres-ruby-gem">Postgres Ruby Gem</h3>

This is the part that everyone cares about the most. If this works your
Rails apps should start working like a charm.

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>env <span class="nv">ARCHFLAGS</span><span class="o">=</span><span class="s1">'-arch x86_64'</span> gem install pg
</code></pre></div></div>
</p>
  
        <div class="f6 fw3 silver mt0">
          
          <time>3 Nov 2009</time>
          
          <span class="ttl">&middot; 



  
	  2 min read
	

</span>
        </div>
      </article>
    </a>
    

  </div>
</div>

<footer class="flex justify-start items-baseline mw7 center w-100 ph3 ph4-ns mt4 mb2 lh-copy">
  <nav class="flex flex-row flex-wrap">
    <span class="f7 fw3 silver mr3 ttc"><a href="https://bjeanes.com/" class="f7 fw5 silver hover-silver link underline-hover" title="Bo Jeanes">Bo jeanes</a> &copy; 2020</span>
    

    
    <span class="f7 fw3 silver mr3">Designed with <a href="https://desiredpersona.com/themes/" class="f7 fw3 silver hover-silver link underline-hover mr3" target="_blank">Minimal Theme</a></span>
    
  </nav>
</footer>

</body>
</html>